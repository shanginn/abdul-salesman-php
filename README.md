русский | [english](README.en.md)

# Абдул, продавец ковров (PHP)

Это PHP-бот для Telegram, который симулирует разговор с вымышленным продавцом ковров по имени Абдул. Он использует API Anthropic для обработки естественного языка и включает элементы личности и настроения, чтобы создать более увлекательное и динамичное взаимодействие.

## Установка

1. **Клонируйте репозиторий:**

```bash
git clone https://github.com/shanginn/abdul-salesman-php.git
cd abdul-salesman-php
```

2. **Установите зависимости:**

```bash
composer install
```

3. **Настройте переменные окружения:**

Скопируйте файл `.env.dist` в `.env` и установите следующие переменные:

```bash
cd src
cp .env.dist .env
```

```dotenv
TELEGRAM_BOT_TOKEN=ваш_токен_бота_telegram
ANTHROPIC_API_KEY=ваш_ключ_api_anthropic
```

4. **Выполните миграции базы данных:**

```bash
php config/orm.php
```

## Использование

1. **Запустите бота:**

```bash
php src/bot.php
```

2. **Взаимодействуйте с ботом:**

Откройте Telegram и найдите бота, которого вы создали, используя `TELEGRAM_BOT_TOKEN`. Начните разговор, отправив любое сообщение.

## Особенности

* **Личность и настроение:** У Абдула есть определенная личность и настроение, которые влияют на его ответы и действия. Вы можете настроить их в файле `config/config.dist.php`.
* **Интеграция с Anthropic:** Использует API Anthropic для продвинутой обработки естественного языка.
* **Инструмент взаимодействия:** Использует специальный инструмент взаимодействия для симуляции внутреннего монолога и изменения настроения.
* **Сохранение в базе данных:** Сохраняет историю разговоров в базе данных SQLite.
* **Плавное завершение работы:** Обрабатывает сигналы SIGTERM и SIGINT для корректного завершения работы.
* **Разработан на базе моего фреймворка для телеграм ботов:** [shanginn/telegram-bot-api-php-framework](https://github.com/shanginn/telegram-bot-api-php-framework)

## Структура кода

* **`src/`:** Содержит основной исходный код бота.
* **`src/Anthropic/`:** Классы, связанные с интеграцией API Anthropic.
* **`src/Character/`:** Классы, определяющие личность и настроение Абдула.
* **`src/Entity/`:** Класс сущности для сохранения в базе данных.
* **`config/`:** Конфигурационные файлы для бота и ORM.
* **`migrations/`:** Файлы миграции базы данных.
* **`tools/`:** Инструменты разработки и зависимости.

## Лицензия

Этот проект лицензирован под лицензией MIT.

## Отказ от ответственности

Этот бот предназначен только для развлекательных целей и не представляет реального человека.
Ответы, генерируемые ботом, основаны на API Anthropic и могут быть не всегда точными или уместными.
