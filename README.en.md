[русский](README.md) | **english**

# Abdul, the Carpet Seller (PHP)

This is a PHP bot for Telegram that simulates a conversation with a fictional carpet seller named Abdul. It uses the Anthropic API for natural language processing and includes elements of personality and mood to create a more engaging and dynamic interaction.

## Installation

1. **Clone the repository:**

```bash
git clone https://github.com/shanginn/abdul-salesman-php.git
cd abdul-salesman-php
```

2. **Install dependencies:**

```bash
composer install
```

3. **Configure environment variables:**

Copy the `.env.dist` file to `.env` and set the following variables:

```bash
cd src
cp .env.dist .env
```

```dotenv
TELEGRAM_BOT_TOKEN=your_telegram_bot_token
ANTHROPIC_API_KEY=your_anthropic_api_key
```

4. **Run database migrations:**

```bash
php config/orm.php
```

## Usage

1. **Start the bot:**

```bash
php src/bot.php
```

2. **Interact with the bot:**

Open Telegram and find the bot you created using the `TELEGRAM_BOT_TOKEN`. Start a conversation by sending any message.

## Features

* **Personality and mood:** Abdul has a defined personality and mood that influence his responses and actions. You can customize these in the `config/config.dist.php` file.
* **Anthropic Integration:** Uses the Anthropic API for advanced natural language processing.
* **Interaction tool:** Utilizes a special interaction tool to simulate internal monologue and mood changes.
* **Database storage:** Saves conversation history in an SQLite database.
* **Graceful shutdown:** Handles SIGTERM and SIGINT signals for proper shutdown.
* **Built on my Telegram bot framework:** [shanginn/telegram-bot-api-php-framework](https://github.com/shanginn/telegram-bot-api-php-framework)

## Code Structure

* **`src/`:** Contains the main bot source code.
* **`src/Anthropic/`:** Classes related to Anthropic API integration.
* **`src/Character/`:** Classes defining Abdul's personality and mood.
* **`src/Entity/`:** Entity class for database storage.
* **`config/`:** Configuration files for the bot and ORM.
* **`migrations/`:** Database migration files.
* **`tools/`:** Development tools and dependencies.

## License

This project is licensed under the MIT License.

## Disclaimer

This bot is intended for entertainment purposes only and does not represent a real person.
Responses generated by the bot are based on the Anthropic API and may not always be accurate or appropriate.